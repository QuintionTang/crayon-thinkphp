{"version":3,"sources":["CustomTable.js","Form.js","CusModal.js","Ui.js","AjaxSelect.js","EditTable.js","app.js"],"names":["CustomTable","elemSelector","newOpts","This","this","_selector","_data_attrs","elem","data","_unorder","_","map","split","unorder","val","toNumber","_sort","csort","_order","corder","_table_options","isNumber","aoColumnDefs","bSortable","aTargets","sort","order","_getDataAttrs","_options","assign","processing","lengthChange","scroll","info","pageLength","paging","filter","oLanguage","sLengthMenu","sZeroRecords","sInfo","sInfoEmtpy","sInfoFiltered","sProcessing","sSearch","oPaginate","sFirst","sPrevious","sNext","sLast","init","DataTable","editTable","istree","console","log","treetable","expandable","on","chk","$","count","length","num","index","level_top","eq","attr","level_bottom","i","le","parseInt","prop","j","be","Form","submitHelper","FormAlert","elTarget","elText","show","msg","html","slideDown","hide","strip","precision","parseFloat","toPrecision","_addUploadEvents","elemTarget","_elem_loader","_elem_upload","dropify","tpl","loader","messages","default","replace","remove","error","change","successMessage","_elem_file_id_input","_form_data","FormData","_upload_config_data","_upload_success","_files","files","append","formdata","uploadUrl","elemId","targetid","ajax","url","type","contentType","processData","dataType","success","response","_closeModal","_success","window","location","reload","attach_id","_formatErrorMsg","message","_getFormData","fields","elemForm","fromData","forEach","attrData","element","_name","name","_isGroup","group","_dataVal","value","_formatVal","newVal","isArray","v","_data_name","concat","push","repeaterFieldName","elemRepeater","repeaterTarget","repeaterType","repeaterVal","JSON","stringify","_addAjaxSelectEvents","selectorClass","_el_ajax_select","_el_select_box","elSelector","parent","_el_select_value","ajax_select","field","_unionSelect","_elem_target_box","_uri","_elem_selects","_select_data","target","uri","unbind","bind","selVal","getJSON","id","result","status","len","_meter_info","size_weight","size_value","join","_weight_unit","_actual_count","_elem_actual_weight","_elem_size_select","_elem_actual","e","title","params","_ajaxData","method","key","strArrayData","encodeURIComponent","deferred","Deferred","ajaxOpts","resolve","res","code","promise","callback","_success_timeout","_auto_tip","_result_notify","options","heading","text","position","loaderBg","icon","hideAfter","stack","beforeHidden","clearTimeout","close","call","showHideTransition","toast","reset","setTimeout","_modalHelper","closethis","_ajaxSuccess","_go_url","_data","href","_submit_ladda","stop","update","errorMsg","_elem_form","toggle","each","thisForm","btnLadda","formElId","submitLadda","formAlert","formName","Ladda","create","document","querySelector","parsley","evt","subscribe","evtName","args","modalHelper","elem_daterangepicker","monthNames","daysOfWeek","elem_daterangepicker_time","item","daterangepicker","parentEl","singleDatePicker","showDropdowns","locale","format","applyLabel","cancelLabel","minYear","moment","add","maxYear","autoApply","opens","start","end","label","timePicker","timePicker24Hour","elemForms","elemSubmitButtonId","isAjax","trigger","formData","then","submit","multiSelect","_newFormEvents","select2","dropdownAutoWidth","language","errorLoading","inputTooLong","n","input","maximum","inputTooShort","minimum","loadingMore","maximumSelected","noResults","searching","removeAllItems","hideError","submitForm","formAction","CusModal","formHelper","_formHelper","_modal","_primary","_isShow","_close_status","_eBody","_eModal","setPrimary","primary","Custombox","modal","closeAll","newHtml","before","canClose","preventDefault","_elem_this","_this_data","_target_id","_target_modal","_modal_title","_elem_close_button","eBody","eModal","mybtn","primaryInfo","content","effect","animation","onClose","color","overlay","overlaycolor","open","Ui","_eventDistributor","_form_helper","login","logout","request","_addEvents","_customModal","_url","acttype","confirm","swal","fire","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonColor","cancelButtonText","_initTable","elemBody","_elem","repeater","slideUp","_elem_ajax_content","_elem_tables","action","_elem_search_form","fn","_This","_settings","extend","disabled","top_option_id","top_option","_self","_pid","_top_option","_ajax_uri","_selected","_selected_arr","_ajax_sel","undefined","indexOf","nextAll","appendTo","_remark","remark","_extend","find","_disabled","off","_this","_childs","substr","insertAfter","self","local_url","search","settings","arr","s_val","trim","s_name","s_id","width","is_date","hasClass","input_id","$this","after","focusout","prev","strtotime","focus","select","img","e_icon","s_icon_class","class","data-value","jQuery","App","_ui","getFeatureId","feature_id","_key","array_url","index_number","findIndex","pageUrl","prototype","helper","_this_feature_id","_this_parent_feature_id","_page_feature_id","addClass","slimscroll","height","size","wheelStep","opacity","touchScrollStep","event","toggleClass","slideToggle","slice","siblings","removeClass","targ","Waves","Constructor"],"mappings":"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","file":"app.min.js","sourcesContent":["function CustomTable(elemSelector) {\n    var This = this;\n    this._selector = elemSelector;\n    this._data_attrs = _getDataAttrs(elemSelector);\n    this._options = _getOptions(this._data_attrs);\n\n    function _addTreeEvents(elem,expandStatus){\n        var _expandStatus = \"expandAll\";\n        console.log(\"dddd\")\n        elem.treetable({ expandable: true }).treetable(_expandStatus);\n        elem.on(\"click\", \".TreeCheckbox\", function() {\n            var chk = $(\".TreeCheckbox\",elem),\n                count = chk.length,\n                num = chk.index($(this)),\n                level_top = chk.eq(num).attr(\"level\"),\n                level_bottom = chk.eq(num).attr(\"level\");\n            for (var i = num; i >= 0; i--) {\n                var le = chk.eq(i).attr(\"level\");\n                if (parseInt(le) < parseInt(level_top)) {\n                    chk.eq(i).prop(\"checked\", true);\n                    var level_top = level_top - 1;\n                }\n            }\n            for (var j = num + 1; j < count; j++) {\n                var be = chk.eq(j).attr(\"level\");\n                if (chk.eq(num).prop(\"checked\")) {\n                    if (parseInt(be) > parseInt(level_bottom)) {\n                        chk.eq(j).prop(\"checked\", true);\n                    } else if (parseInt(be) == parseInt(level_bottom)) break;\n                } else {\n                    if (parseInt(be) > parseInt(level_bottom)) chk.eq(j).prop(\"checked\", false);\n                    else if (parseInt(be) == parseInt(level_bottom)) break;\n                }\n            }\n        });\n    }\n\n    /**\n     * 获取table 对象data属性\n     * @param {*} elem \n     */\n    function _getDataAttrs(elem){\n        var _data_attrs = elem.data() || {};\n\n        var _unorder = _.map(_.split(_data_attrs.unorder,\",\"),function(val){\n            return _.toNumber(val);\n        }),\n            _sort = _data_attrs.csort,\n            _order = _data_attrs.corder || \"asc\",\n            _table_options = {};\n        if (_.isNumber(_sort)){\n            _table_options= {\n                aoColumnDefs: [{ bSortable: false, aTargets: _unorder }],\n                sort: true,\n                order: [[_sort, _order]],\n            }\n            \n        }\n        return _table_options;\n    }\n    function _getOptions(newOpts){\n        return _.assign({\n            processing: true,\n            lengthChange: false,\n            aTargets: [],\n            order: false,\n            sort: false,\n            scroll: false,\n            info:false,\n            pageLength: 20,\n            paging:false,\n            filter: false,\n            oLanguage: {\n                sLengthMenu: \"每页显示 _MENU_ 条记录\",\n                sZeroRecords: \"暂无任何数据记录\",\n                sInfo: \"当前显示 _START_ 到 _END_ 条，共 _TOTAL_条记录\",\n                sInfoEmtpy: \"找不到相关数据\",\n                sInfoFiltered: \" 数据表中共为 _MAX_ 条记录\",\n                sProcessing: \"数据加载中...\",\n                sSearch: \"搜索\",\n                oPaginate: {\n                    sFirst: \"第一页\",\n                    sPrevious: \" 上一页 \",\n                    sNext: \" 下一页 \",\n                    sLast: \" 最后一页 \",\n                },\n            },\n        },newOpts);\n    }\n    this.init = function(){\n        var _table_options = _.assign({},This._options);\n        this._selector.DataTable(_table_options);\n        this._selector.editTable();\n        if (this._selector.data().istree){\n            _addTreeEvents(this._selector)\n        }\n        \n    }\n}\n","function Form(submitHelper) {\n    var This = this;\n    this._modalHelper = false;\n    this._elem_form = false;\n    this._submit_ladda = false;\n    /**\n     * form提示\n     * @param {*} elTarget\n     */\n    function FormAlert(elTarget) {\n        var elText = $(\".alert-text\", elTarget);\n        this.show = function (msg) {\n            elText.html(msg);\n            elTarget.slideDown();\n        };\n        this.hide = function () {\n            elTarget.hide();\n            elText.html(\"\");\n        };\n    }\n    function strip(num, precision = 12) {\n        num = parseFloat(num);\n        return +parseFloat(num.toPrecision(precision));\n    }\n    function _addDateSelectEvents(elemTarget) {\n        var elem_daterangepicker = $(\n                '[data-plugin=\"daterangepicker\"]',\n                elemTarget\n            ),\n            elem_daterangepicker_time = $(\n                '[data-plugin=\"daterangepickertime\"]',\n                elemTarget\n            );\n        var monthNames = [\n                \"一月\",\n                \"二月\",\n                \"三月\",\n                \"四月\",\n                \"五月\",\n                \"六月\",\n                \"七月\",\n                \"八月\",\n                \"九月\",\n                \"十月\",\n                \"十一月\",\n                \"十二月\",\n            ],\n            daysOfWeek = [\n                \"周日\",\n                \"周一\",\n                \"周二\",\n                \"周三\",\n                \"周四\",\n                \"周五\",\n                \"周六\",\n            ];\n        if (elem_daterangepicker.length > 0) {\n            elem_daterangepicker.each(function (item) {\n                var _elem_this = $(this);\n                _elem_this.daterangepicker(\n                    {\n                        parentEl: elemTarget,\n                        singleDatePicker: true,\n                        showDropdowns: true,\n                        locale: {\n                            format: \"YYYY-MM-DD\",\n                            applyLabel: \"确定\",\n                            cancelLabel: \"取消\",\n                            monthNames: monthNames,\n                            daysOfWeek: daysOfWeek,\n                        },\n                        minYear: parseInt(\n                            moment().add(-1, \"years\").format(\"YYYY\"),\n                            10\n                        ),\n                        maxYear: parseInt(\n                            moment().add(2, \"years\").format(\"YYYY\"),\n                            10\n                        ),\n                        autoApply: true,\n                        opens: \"left\",\n                    },\n                    function (start, end, label) {}\n                );\n            });\n        }\n        if (elem_daterangepicker_time.length > 0) {\n            elem_daterangepicker_time.each(function () {\n                var _elem_this = $(this);\n                _elem_this.daterangepicker(\n                    {\n                        parentEl: elemTarget,\n                        singleDatePicker: true,\n                        showDropdowns: true,\n                        timePicker: true,\n                        minYear: 2021,\n                        timePicker24Hour: true,\n                        locale: {\n                            format: \"YYYY-MM-DD hh:mm\",\n                            applyLabel: \"确定\",\n                            cancelLabel: \"取消\",\n                            monthNames: monthNames,\n                            daysOfWeek: daysOfWeek,\n                        },\n                        autoApply: true,\n                        opens: \"left\",\n                    },\n                    function (start, end, label) {}\n                );\n            });\n        }\n    }\n    function _addUploadEvents(elemTarget) {\n        var _elem_upload = $(\".dropify\", elemTarget),\n            _upload_devents = false;\n        if (_elem_upload.length > 0) {\n            var _elem_loader = $(\".dropify-loader\", elemTarget);\n            _upload_devents = _elem_upload.dropify({\n                tpl: {\n                    loader: '<div class=\"dropify-loader\"></div>',\n                },\n                messages: {\n                    default: \"点击或拖拽文件到这里\",\n                    replace: \"点击或拖拽文件到这里来替换文件\",\n                    remove: \"移除文件\",\n                    error: \"对不起，你上传的文件太大了\",\n                },\n            });\n            _elem_loader.hide();\n            _elem_upload.change(function () {\n                var _form_data = new FormData();\n                var _upload_config_data = _elem_upload.data();\n                var _upload_success = _upload_config_data.successMessage;\n                var _files = _elem_upload[0].files[0];\n                _form_data.append(\"file\", _files);\n                _elem_loader.show();\n                _uploadData(\n                    _form_data,\n                    _upload_config_data.uploadUrl,\n                    _upload_config_data.targetid,\n                    _upload_success\n                );\n            });\n        }\n    }\n    function _uploadData(formdata, uploadUrl, elemId, successMessage) {\n        var _elem_file_id_input = $(elemId);\n        $.ajax({\n            url: uploadUrl,\n            type: \"post\",\n            data: formdata,\n            contentType: false,\n            processData: false,\n            dataType: \"json\",\n            success: function (response) {\n                if (response) {\n                    if (response.success > 0) {\n                        if (response.count) {\n                            _closeModal();\n                            var _success_message =\n                                successMessage || \"成功导入工人信息\";\n                            _success(\n                                _success_message + \"：\" + response.count + \"！\",\n                                \"\",\n                                function () {\n                                    window.location.reload();\n                                }\n                            );\n                        } else {\n                            if (\n                                _elem_file_id_input &&\n                                _elem_file_id_input.length > 0\n                            ) {\n                                _elem_file_id_input.val(response.attach_id);\n                            }\n                        }\n                    } else {\n                        _formatErrorMsg(response.message || \"服务器异常！\");\n                    }\n                } else {\n                    _formatErrorMsg(response.message || \"服务器异常！\");\n                }\n                $(\".dropify-loader\").hide();\n            },\n        });\n    }\n    function _formatData(val, valType) {\n        var newVal = val;\n        switch (valType) {\n            case \"number\":\n                if (_.isArray(newVal)) {\n                    newVal = _.map(newVal, function (v) {\n                        return _.toNumber(v);\n                    });\n                } else {\n                    newVal = _.toNumber(newVal);\n                }\n\n                break;\n            default:\n                newVal = val;\n                break;\n        }\n        return newVal;\n    }\n    function _getFormData(fields, elemForm) {\n        var fromData = {};\n        fields.forEach(function (val) {\n            var elemField = $(val.element),\n                attrData = elemField.data(),\n                dataType = attrData.type || \"string\",\n                _name = val.element.name,\n                _isGroup = attrData.group,\n                _dataVal = val.value,\n                _formatVal = _formatData(_dataVal, dataType);\n            if (_isGroup) {\n                var _data_name = attrData.name;\n                if (_.isArray(_formatVal)) {\n                    if (fromData[_data_name]) {\n                        fromData[_data_name] = _.concat(\n                            fromData[_data_name],\n                            _formatVal\n                        );\n                        // fromData[_data_name].push(_formatVal);\n                    } else {\n                        fromData[_data_name] = _formatVal;\n                    }\n                } else {\n                    if (fromData[_data_name]) {\n                        fromData[_data_name].push(_formatVal);\n                    } else {\n                        fromData[_data_name] = [_formatVal];\n                    }\n                }\n            } else {\n                if (_name != \"\" && dataType != \"array\") {\n                    fromData[_name] = _formatVal;\n                }\n            }\n        });\n        var elemRepeater = $(\".repeater-params\", elemForm);\n        if (elemRepeater && elemRepeater.length > 0) {\n            var repeaterFieldName = elemRepeater.data(\"name\"),\n                repeaterTarget = elemRepeater.data(\"target\"),\n                repeaterType = elemRepeater.data(\"type\"),\n                repeaterVal = elemRepeater.repeaterVal();\n            if (fromData && repeaterVal && repeaterVal[repeaterTarget]) {\n                if (repeaterType == \"string\") {\n                    fromData[repeaterFieldName] = JSON.stringify(\n                        repeaterVal[repeaterTarget]\n                    );\n                } else {\n                    fromData[repeaterFieldName] = repeaterVal[repeaterTarget];\n                }\n            }\n        }\n        return fromData;\n    }\n    function _ajaxSelect(elSelector, selectorClass) {\n        var _el_select_box = elSelector.parent(),\n            _el_select_value = $(\"input.\" + selectorClass, _el_select_box);\n        elSelector.ajax_select({\n            field: _el_select_value,\n        });\n    }\n\n    function _addAjaxSelectEvents(elemForm) {\n        var _el_ajax_select = $(\".ajax-select\", elemForm);\n        if (_el_ajax_select.length > 0) {\n            _ajaxSelect(_el_ajax_select, \"ajax-select-val\");\n        }\n    }\n    function _addEvents(elemTarget) {\n        var elemForms = elemTarget\n            ? $(\".form-parsley\", elemTarget)\n            : $(\".form-parsley\");\n        elemForms.each(function (index, elem) {\n            var thisForm = $(elem),\n                btnLadda = $(\".ladda-button\", thisForm),\n                formElId = [\"#\", thisForm.attr(\"id\")].join(\"\"),\n                submitLadda = false,\n                formAlert = new FormAlert($(\".alert-form-box\", thisForm)),\n                formName = thisForm.attr(\"name\");\n            if (btnLadda.length > 0) {\n                submitLadda = Ladda.create(\n                    document.querySelector(formElId + \" .ladda-button\")\n                );\n            }\n            This._submit_ladda = submitLadda;\n            thisForm\n                .parsley()\n                .on(\"form:submit\", function (evt, elem) {\n                    return false;\n                })\n                .subscribe(\"form:submit\", function (evtName, args) {\n                    submitLadda && submitLadda.toggle();\n                    formAlert.hide();\n                    if (typeof submitHelper[formName] === \"function\") {\n                        submitHelper\n                            .init(formAlert, submitLadda, thisForm)\n                            [formName](_getFormData(args.fields, thisForm));\n                    }\n                    return false;\n                });\n            _addAjaxSelectEvents(thisForm);\n            _unionSelect(thisForm);\n        });\n    }\n\n    function _unionSelect(elemTarget) {\n        var _elem_selects = $(\".unionSelect\", elemTarget);\n        if (_elem_selects.length > 0) {\n            var _select_data = _elem_selects.data(),\n                _elem_target_box = $(_select_data.target),\n                _uri = _select_data.uri;\n            _elem_selects.unbind(\"change\").bind(\"change\", function () {\n                var selVal = $(this).val();\n                if (selVal != \"0\" || selVal != \"\") {\n                    $.getJSON(\n                        _uri,\n                        {\n                            id: selVal,\n                        },\n                        function (result) {\n                            if (result.status) {\n                                var data = result.data,\n                                    html = [];\n                                html.push(\n                                    '<option value=\"0\">-- 请选择石头尺寸 --</option>'\n                                );\n                                for (\n                                    var i = 0, len = data.length;\n                                    i < len;\n                                    i++\n                                ) {\n                                    var _meter_info = data[i];\n                                    html.push(\n                                        '<option title=\"' +\n                                            _meter_info.size_weight +\n                                            '\" value=\"' +\n                                            _meter_info.id +\n                                            '\">' +\n                                            _meter_info.size_value +\n                                            \"（mm）：\" +\n                                            _meter_info.size_weight +\n                                            \"（ct）</option>\"\n                                    );\n                                }\n                                _elem_target_box.html(html.join(\"\")).show();\n                            }\n                        }\n                    );\n                }\n            });\n        }\n\n        var _elem_size_select = $(\"#jewel_size_box\");\n        if (_elem_size_select.length > 0) {\n            var _weight_unit = 0,\n                _actual_count = 0;\n            var _elem_actual = $(\"#actual_count\"),\n                _elem_actual_weight = $(\"#actual_weight\");\n            _elem_size_select.on(\"select2:select\", function (e) {\n                var data = e.params.data,\n                    title = data.title;\n                _weight_unit = strip(title, 3);\n                _elem_actual_weight.val(strip(_actual_count * _weight_unit));\n            });\n\n            _elem_actual\n                .unbind(\"input propertychange\")\n                .bind(\"input propertychange\", function () {\n                    _actual_count = strip($(this).val());\n                    _elem_actual_weight.val(\n                        strip(_actual_count * _weight_unit)\n                    );\n                });\n        }\n    }\n\n    function _ajaxData(url, data, method) {\n        var strArrayData = [];\n        for (var key in data) {\n            strArrayData.push(\n                [key, \"=\", encodeURIComponent(data[key])].join(\"\")\n            );\n        }\n        var deferred = $.Deferred(),\n            ajaxOpts = {\n                type: method || \"POST\",\n                url: url,\n                contentType: \"application/x-www-form-urlencoded\",\n                success: function (response) {\n                    deferred.resolve(response, false);\n                },\n                error: function (res) {\n                    deferred.resolve(false, {\n                        status: res.status || 0,\n                        code: -1,\n                        message: _formatErrorMsg(res),\n                    });\n                },\n            };\n        if (data) {\n            ajaxOpts[\"data\"] = strArrayData.join(\"&\");\n        }\n        $.ajax(ajaxOpts);\n        return deferred.promise();\n    }\n    function _toastr(\n        heading,\n        body,\n        position,\n        loaderBgColor,\n        icon,\n        hideAfter,\n        stack,\n        showHideTransition,\n        beforeHidden\n    ) {\n        // default\n        if (!hideAfter) hideAfter = 3000;\n        if (!stack) stack = 1;\n\n        var options = {\n            heading: heading,\n            text: body,\n            position: position,\n            loaderBg: loaderBgColor,\n            icon: icon,\n            hideAfter: hideAfter,\n            stack: stack,\n            beforeHidden: beforeHidden,\n        };\n\n        if (showHideTransition) options.showHideTransition = showHideTransition;\n        $.toast().reset(\"all\");\n        return $.toast(options);\n    }\n    function _success(title, msg, callback) {\n        var _success_timeout = false,\n            _timeout = 2,\n            _auto_tip =\n                '<strong><i class=\"number\">' +\n                _timeout +\n                \"秒</i>后将自动关闭！</strong>\";\n        if (msg !== \"\") {\n            msg += \"<br/>\" + _auto_tip;\n        } else {\n            msg = _auto_tip;\n        }\n\n        var _result_notify = _toastr(\n            title,\n            msg,\n            \"top-right\",\n            \"#5ba035\",\n            \"success\",\n            2000,\n            1,\n            \"slide\",\n            function () {\n                if (_success_timeout) {\n                    clearTimeout(_success_timeout);\n                    _success_timeout = false;\n                }\n                _result_notify.close();\n                callback.call();\n            }\n        );\n\n        // swal.fire({\n        //     title: title,\n        //     html: msg,\n        //     type: 'success',\n        //     showCancelButton: false,\n        //     confirmButtonColor: '#5c90d2',\n        //     confirmButtonText: '确定'\n        // }, function () {\n        //     if (_success_timeout){\n        //         clearTimeout(_success_timeout);\n        //         _success_timeout = false;\n        //     }\n        //     swal.close();\n        //     callback.call();\n        // });\n\n        setTimeout(function () {\n            _result_notify.close();\n            callback.call();\n        }, 1000);\n    }\n    function _closeModal() {\n        if (This._modalHelper && This._modalHelper.closethis) {\n            This._modalHelper.closethis();\n        }\n    }\n    function _ajaxSuccess(result) {\n        if (result.status == 1) {\n            _closeModal();\n            var _go_url = \"\",\n                _data = result.data;\n            if (_data !== \"\" && _data.url) {\n                _go_url = _data.url;\n            }\n            _success(\"操作成功！\", result.msg, function () {\n                if (_go_url !== \"\") {\n                    window.location.href = _go_url;\n                } else {\n                    window.location.reload();\n                }\n                This._submit_ladda && This._submit_ladda.stop();\n            });\n        } else {\n            if (result.status == 2) {\n                This._modalHelper.update(result.data);\n            } else {\n                _formatErrorMsg(result.msg);\n            }\n            This._submit_ladda && This._submit_ladda.stop();\n        }\n    }\n    function _newFormEvents(elemTarget) {\n        This._elem_form = elemTarget;\n        var elemForms = elemTarget;\n        if ($(\"form\", elemForms).length > 0) {\n            elemForms.each(function (index, elem) {\n                var thisForm = $(\"form\", elem),\n                    btnLadda = $(\".ladda-button\", thisForm),\n                    elemSubmitButtonId = [\"#\", elem.id + \" .ladda-button\"].join(\n                        \"\"\n                    ),\n                    submitLadda = false,\n                    formAlert = new FormAlert($(\".alert-form-box\", thisForm)),\n                    elemIsAjax = $(\"input[name='ajax']\", thisForm),\n                    isAjax = elemIsAjax.val() != \"1\",\n                    formName = thisForm.attr(\"data-action\");\n                if (btnLadda.length > 0) {\n                    submitLadda = Ladda.create(\n                        document.querySelector(elemSubmitButtonId)\n                    );\n                }\n                This._submit_ladda = submitLadda;\n                thisForm\n                    .parsley({\n                        trigger: \"focusout\",\n                    })\n                    .on(\"form:submit\", function (evt, elem) {\n                        return isAjax;\n                    })\n                    .subscribe(\"form:submit\", function (evtName, args) {\n                        submitLadda && submitLadda.toggle();\n                        formAlert.hide();\n                        var formData = _getFormData(args.fields, thisForm);\n                        _ajaxData(thisForm.attr(\"action\"), formData).then(\n                            function (res, error) {\n                                if (error) {\n                                    console.log(error);\n                                } else {\n                                    _ajaxSuccess(res);\n                                }\n                            }\n                        );\n                        // if (typeof submitHelper[formName] === \"function\") {\n                        //     submitHelper\n                        //         .init(formAlert, submitLadda, thisForm)\n                        //         [formName](_getFormData(args.fields, thisForm));\n                        // }\n                        return false;\n                    });\n                $(elemSubmitButtonId)\n                    .unbind(\"click\")\n                    .bind(\"click\", function () {\n                        thisForm.submit();\n                    });\n                _addAjaxSelectEvents(thisForm);\n            });\n        }\n\n        if ($('[data-plugin=\"multiselect\"]').length > 0)\n            $('[data-plugin=\"multiselect\"]').multiSelect($(this).data());\n        return elemForms;\n    }\n    function _formatErrorMsg(errorMsg) {\n        if (This._elem_form !== false) {\n            This.error(errorMsg, This._elem_form);\n        } else {\n            console.error(errorMsg);\n        }\n        This._submit_ladda && This._submit_ladda.toggle();\n    }\n    function _diyFormEvents(elemTarget, submitCallback) {\n        This._elem_form = elemTarget;\n        var elemForms = elemTarget;\n        if ($(\"form\", elemForms).length > 0) {\n            elemForms.each(function (index, elem) {\n                var thisForm = $(\"form\", elem),\n                    btnLadda = $(\".ladda-button\", thisForm),\n                    elemSubmitButtonId = [\"#\", elem.id + \" .ladda-button\"].join(\n                        \"\"\n                    ),\n                    submitLadda = false,\n                    formAlert = new FormAlert($(\".alert-form-box\", thisForm)),\n                    elemIsAjax = $(\"input[name='ajax']\", thisForm),\n                    isAjax = elemIsAjax.val() != \"1\",\n                    formName = thisForm.attr(\"data-action\");\n                if (btnLadda.length > 0) {\n                    submitLadda = Ladda.create(\n                        document.querySelector(elemSubmitButtonId)\n                    );\n                }\n                This._submit_ladda = submitLadda;\n                thisForm\n                    .parsley({\n                        trigger: \"focusout\",\n                    })\n                    .on(\"form:submit\", function (evt, elem) {\n                        return isAjax;\n                    })\n                    .subscribe(\"form:submit\", function (evtName, args) {\n                        submitLadda && submitLadda.toggle();\n                        formAlert.hide();\n                        var formData = _getFormData(args.fields, thisForm);\n\n                        submitCallback(\n                            thisForm.attr(\"action\"),\n                            formData,\n                            formAlert,\n                            This._submit_ladda\n                        );\n                        return false;\n                    });\n                $(elemSubmitButtonId)\n                    .unbind(\"click\")\n                    .bind(\"click\", function () {\n                        thisForm.submit();\n                    });\n                _addAjaxSelectEvents(thisForm);\n            });\n        }\n\n        if ($('[data-plugin=\"multiselect\"]').length > 0)\n            $('[data-plugin=\"multiselect\"]').multiSelect($(this).data());\n        return elemForms;\n    }\n    this.init = function () {\n        _addEvents(false);\n    };\n    this.reset = function (elemTarget, modalHelper) {\n        this._modalHelper = modalHelper;\n        this._elem_form = elemTarget;\n        _addUploadEvents(elemTarget);\n        _addDateSelectEvents($(\".modal-body\", elemTarget));\n        _newFormEvents(elemTarget);\n        _unionSelect(elemTarget);\n        $(\".select2\", elemTarget).select2({\n            dropdownAutoWidth: true,\n            language: {\n                errorLoading: function () {\n                    return \"无法载入结果。\";\n                },\n                inputTooLong: function (n) {\n                    return \"请删除\" + (n.input.length - n.maximum) + \"个字符\";\n                },\n                inputTooShort: function (n) {\n                    return (\n                        \"请再输入至少\" + (n.minimum - n.input.length) + \"个字符\"\n                    );\n                },\n                loadingMore: function () {\n                    return \"载入更多结果…\";\n                },\n                maximumSelected: function (n) {\n                    return \"最多只能选择\" + n.maximum + \"个项目\";\n                },\n                noResults: function () {\n                    return \"未找到相应的选项\";\n                },\n                searching: function () {\n                    return \"搜索中…\";\n                },\n                removeAllItems: function () {\n                    return \"删除所有项\";\n                },\n            },\n        });\n    };\n    this.error = function (errorMsg, elemForm) {\n        // submitHelper.cusError(errorMsg);\n        var _form_alert = new FormAlert($(\".alert-form-box\", elemForm));\n        _form_alert.show(errorMsg);\n    };\n    this.hideError = function (elemForm) {\n        // submitHelper.cusError(errorMsg);\n        var _form_alert = new FormAlert($(\".alert-form-box\", elemForm));\n        _form_alert.hide();\n    };\n    this.success = function (title, msg, callback) {\n        _success(title, msg, callback);\n    };\n    this.ajax = function (url, data) {\n        _ajaxData(url, data).then(function (res, error) {\n            if (error) {\n                console.log(error);\n            } else {\n                _ajaxSuccess(res);\n            }\n        });\n    };\n    this.submitForm = function (formAction, formData, callback) {\n        _ajaxData(formAction, formData).then(function (res, error) {\n            callback(res, error);\n        });\n    };\n}\n","function CusModal(formHelper) {\n    var This = this;\n    this._formHelper = formHelper;\n    this._modal = false;\n    this._primary = false;\n    this._isShow = false;\n    this._close_status = true;\n    this._eBody = false;\n    this._eModal = false;\n\n    function _addModalEvents(elemSelector) {\n        var _clickFunction = function (e) {\n            e.preventDefault();\n\n            var _elem_this = $(this),\n                _this_data = _elem_this.data(),\n                _target_id = _this_data.targetid || _elem_this.attr(\"href\"),\n                _target_modal = $(_target_id),\n                _modal_title = $(\".custom-modal-title\", _target_modal),\n                _elem_close_button = $(\n                    \".modal-header button.close\",\n                    _target_modal\n                );\n            if (This._close_status) {\n                _elem_close_button.show();\n            } else {\n                _elem_close_button.hide();\n            }\n            _this_data.eBody = $(\".modal-body\", _target_modal);\n            This._eBody = _this_data.eBody;\n            _this_data.eModal = _target_modal;\n            This._eModal = _target_modal;\n            _this_data.mybtn = _elem_this;\n            _modal_title.text(_this_data.title);\n            _this_data.primaryInfo = This._primary || _this_data.id;\n            This.before(_this_data, function () {\n                This._isShow = true;\n                This._modal = new Custombox.modal({\n                    content: {\n                        target: _target_id,\n                        effect: _this_data.animation,\n                        onClose: function () {\n                            This._eBody.html(\"\");\n                            This._isShow = false;\n                        },\n                    },\n                    loader: {\n                        color: \"#0077ff\",\n                    },\n                    overlay: {\n                        color: _this_data.overlaycolor,\n                        close: false,\n                    },\n                });\n                This._modal.open();\n            });\n        };\n        $('.events-button[data-plugin=\"custommodal\"]', elemSelector || \"body\")\n            .unbind(\"click\")\n            .bind(\"click\", _clickFunction);\n    }\n    this.setPrimary = function (primary) {\n        this._primary = primary;\n    };\n    this.close = function () {\n        Custombox.modal.closeAll();\n        This._isShow = false;\n    };\n    this.closethis = function () {\n        Custombox.modal.close();\n        This._isShow = false;\n    };\n    this.update = function (newHtml) {\n        This._eBody.html(newHtml);\n\n        This._formHelper.reset(This._eModal, This);\n    };\n    this.before = function (data, callback) {};\n    this.canClose = function (status) {\n        this._close_status = status;\n    };\n    this.init = function (elemSelector) {\n        _addModalEvents(elemSelector);\n    };\n}\n","function Ui() {\n    var This = this;\n    var _eventDistributor = new _EventDistributor();\n    /**\n     * 事件分发器\n     */\n    function _EventDistributor() {\n        var _this = this,\n            _form_helper = new Form();\n\n        this.login = function (args) {\n            _form_helper.reset($(\"#auth-page\"));\n        };\n        this.logout = function (url) {\n            _form_helper.ajax(url, {\n                request: \"logout\",\n            });\n        };\n    }\n    function _addSearchEvents(){\n        var _elem_search_form = $(\"form.search-form\");\n        if (_elem_search_form.length>0){\n            var _elem_selects = $(\"select\",_elem_search_form);\n            _elem_selects.each(function (index, elem) {\n                $(elem).bind(\"change\", function () {\n                    var selVal = $(this).val();\n                    if (selVal!=\"0\" || selVal!=\"\"){\n                        _elem_search_form.submit();\n                    }\n                });\n            });\n        }\n    }\n    function _addEvents() {\n        var _form_helper = new Form(),\n            _event_buttons = $(\"a.events-button\");\n        if (_event_buttons.length > 0) {\n            var _customModal = new CusModal(_form_helper);\n\n            _customModal.before = function (data, callback) {\n                if (data.acttype === \"ajax\") {\n                    var _url = data.uri;\n                    if (data.confirm && data.confirm == \"confirm\") {\n                        swal.fire({\n                            title: data.msg,\n                            html: \"删除后内容无法恢复！\",\n                            type: \"warning\",\n                            showCancelButton: true,\n                            confirmButtonColor: \"#5c90d2\",\n                            confirmButtonText: \"确定删除\",\n                            cancelButtonColor: \"#f5f5f5\",\n                            cancelButtonText: \"取消\",\n                            onClose: false,\n                        }).then(function (result) {\n                            if (result.value) {\n                                $.getJSON(_url, function (result) {\n                                    if (result.status == 1) {\n                                        _form_helper.success(\n                                            \"操作成功！\",\n                                            result.msg,\n                                            function () {\n                                                window.location.reload();\n                                            }\n                                        );\n                                    } else {\n                                        swal.fire(\n                                            \"操作失败\",\n                                            result.msg,\n                                            \"error\"\n                                        );\n                                        //_that.error(result.msg);\n                                    }\n                                });\n                            }\n                        });\n                    } else {\n                        $.getJSON(_url, function (result) {\n                            if (result.status == 1) {\n                                data.eBody.html(result.data);\n\n                                _form_helper.reset(data.eModal, _customModal);\n                                _initTable(data.eBody);\n                                _initRepeater(data.eBody);\n                                callback.call();\n                            } else {\n                                console.log(\"error\");\n                            }\n                        });\n                    }\n                }\n            };\n            _customModal.init();\n        }\n        \n        var _elem_ajax_content = $(\".ajax-post-body\");\n        if (_elem_ajax_content.length > 0) {\n            _form_helper.reset(_elem_ajax_content);\n        }\n    }\n    function _initTable(elemBody) {\n        var _elem_tables = $(\".custom-table\", elemBody);\n        _.forEach(_elem_tables, function (elem) {\n            var _table_methods = new CustomTable($(elem));\n            _table_methods.init();\n        });\n    }\n    function _initRepeater(elemBody) {\n        var _elem = $(\".repeater-custom-form\", elemBody);\n        if (_elem && _elem.length > 0) {\n            _elem.repeater({\n                show: function () {\n                    $(this).slideDown();\n                },\n                hide: function (remove) {\n                    if (confirm(\"确定要删除这一条？\")) {\n                        $(this).slideUp(remove);\n                    }\n                },\n            });\n        }\n    }\n    this.init = function (action, options) {\n        typeof _eventDistributor[action] === \"function\" &&\n            _eventDistributor[action].call(null, options);\n        _addEvents();\n        _addSearchEvents();\n        _initTable($(\".page-content\"));\n    };\n    this.logout = function (url) {\n        _eventDistributor.logout(url);\n    };\n}\n","/* ========================================================================\n * ajax_select: AJAX获取数据联动SELECT\n * ========================================================================\n */\n$.fn.ajax_select = function (options) {\n    var _This = this,\n        _ajax_sel = \".ajax-select\",\n        _settings = $.extend(\n            {\n                field: $(\"#OD_ajax_select\"),\n                disabled: false,\n                top_option_id: 0,\n                top_option: \"请选择\",\n            },\n            options || {}\n        ),\n        _self = $(this),\n        _pid = _self.attr(\"data-pid\"),\n        _top_option = _self.attr(\"data-top-option\") || _settings.top_option,\n        _ajax_uri = _self.attr(\"data-uri\"),\n        _selected = _self.attr(\"data-selected\"),\n        _selected_arr = [];\n    this._self = _self;\n    this._ajax_sel = _ajax_sel;\n    this._ajax_uri = _ajax_uri;\n    if (_selected != undefined && _selected != \"0\") {\n        if (_selected.indexOf(\"|\")) {\n            _selected_arr = _selected.split(\"|\");\n        } else {\n            _selected_arr = [];\n            _selected_arr[0] = _selected;\n        }\n    }\n    this._self.nextAll(_This._ajax_sel).remove();\n    $(\n        '<option value=\"' +\n            _settings.top_option_id +\n            '\">--' +\n            _top_option +\n            \"--</option>\"\n    ).appendTo(this._self);\n    $.ajax({\n        url: _This._ajax_uri,\n        data: {\n            id: _pid,\n        },\n        success: function (result) {\n            if (result.status == \"1\") {\n                for (var i = 0; i < result.data.length; i++) {\n                    var _remark = result.data[i].remark;\n                    if (_remark && _remark != \"\") {\n                        _remark = \"【\" + _remark + \"】\";\n                    } else {\n                        _remark = \"\";\n                    }\n                    var _extend = result.data[i].extend || \"\";\n                    $(\n                        '<option data-extend=\"' +\n                            _extend +\n                            '\" value=\"' +\n                            result.data[i].id +\n                            '\">--' +\n                            _remark +\n                            result.data[i].name +\n                            \"--</option>\"\n                    ).appendTo(_This._self);\n                }\n            }\n            if (_selected_arr.length > 0) {\n                //IE6 BUG\n                setTimeout(function () {\n                    _This._self\n                        .find('option[value=\"' + _selected_arr[0] + '\"]')\n                        .attr(\"selected\", true);\n                    _This._self.trigger(\"change\");\n                }, 1);\n            }\n        },\n    });\n\n    var j = 1,\n        _disabled = \"\";\n\n    if (_settings.disabled) {\n        _disabled = ' _disabled=\"true\"';\n    }\n\n    if (_pid) {\n        $(document).off(\"change\", \".ajax-select\");\n        $(document).on(\"change\", \".ajax-select\", function () {\n            var _this = $(this),\n                _extend = $(\"option:selected\", _this).attr(\"data-extend\") || \"\";\n            _pid = _this.val();\n            _this.nextAll(_This._ajax_sel).remove();\n            if (_pid > 0) {\n                $.getJSON(\n                    _This._ajax_uri,\n                    {\n                        id: _pid,\n                        extend: _extend,\n                    },\n                    function (result) {\n                        if (result.status == \"1\") {\n                            var _childs = $(\n                                \"<select \" +\n                                    _disabled +\n                                    ' class=\"' +\n                                    _This._ajax_sel.substr(1) +\n                                    ' ajax-select custom-select form-control mr-2\" data-pid=\"' +\n                                    _pid +\n                                    '\"><option value=\"0\">--' +\n                                    _top_option +\n                                    \"--</option></select>\"\n                            );\n                            for (var i = 0; i < result.data.length; i++) {\n                                $(\n                                    '<option value=\"' +\n                                        result.data[i].id +\n                                        '\">--' +\n                                        result.data[i].name +\n                                        \"--</option>\"\n                                ).appendTo(_childs);\n                            }\n                            _childs.insertAfter(_this);\n                            if (_selected_arr[j] != undefined) {\n                                _childs\n                                    .find(\n                                        'option[value=\"' +\n                                            _selected_arr[j] +\n                                            '\"]'\n                                    )\n                                    .attr(\"selected\", true);\n                                _childs.trigger(\"change\");\n                            }\n                            j++;\n                        }\n                    }\n                );\n                _settings.field.val(_pid);\n            } else {\n                _settings.field.val(_this.attr(\"data-pid\"));\n            }\n        });\n    }\n};\n","/**\n * @name 表格操作类(修改值，状态切换)\n */\n;(function($) {\n\t$.fn.editTable = function(options) {\n\t\tvar self = this,\n\t\t\tlocal_url = window.location.search,\n\t\t\tsettings = {\n\t\t\t\turl: $(self).attr('data-acturi')\n\t\t\t};\n\t\tif(options) {\n\t\t\t$.extend(settings, options);\n\t\t}\n\t\t//整理排序\n\t\tvar params  = local_url.substr(1).split('&');\n\t\tvar sort,order;\n\t\tfor(var i=0; i < params.length; i++) {\n\t\t\tvar param = params[i];\n\t\t\tvar arr   = param.split('=');\n\t\t\tif(arr[0] == 'sort') {\n\t\t\t\tsort = arr[1];\n\t\t\t}\n\t\t\tif(arr[0] == 'order') {\n\t\t\t\torder = arr[1];\n\t\t\t}\n\t\t}\n\t\t//修改\n\t\t$(self).on(\"click\",'span[data-tdtype=\"edit\"]',function(){\n\t\t\tvar s_val   =$.trim($(this).text()),\n    \t\t\ts_name  = $(this).attr('data-field'),\n    \t\t\ts_id    = $(this).attr('data-id'),\n    \t\t\twidth   = $(this).width(),\n                is_date  = $(this).hasClass('date'),\n                input_id=\"list_table_edit_input_\"+s_id;\n                $this=$(this);\n\n            $(this).hide();\n            $(this).after('<input id=\"'+input_id+'\" type=\"text\" class=\"tabledit-input form-control\" value=\"'+s_val+'\" />');\n\n            function _ajax_update(){\n                $this=$('#'+input_id);\n                $this.prev('span').show().text($this.val());\n\t\t\t\tif($this.val() != s_val) {\n\t\t\t\t    var val=$this.val();\n\t\t\t\t    if(is_date){\n\t\t\t\t        val=strtotime(val);\n\t\t\t\t    }\n\t\t\t\t\t$.getJSON(settings.url, {id:s_id, field:s_name, val:val}, function(result){\n\t\t\t\t\t\tif(result.status == 0) {\n\t\t\t\t\t\t\t$('span[data-field=\"'+s_name+'\"][data-id=\"'+s_id+'\"]').text(s_val);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n                $this.remove();\n            }\n\n            $('#'+input_id).width(width).focusout(function(){\n                if(is_date) return;\n                _ajax_update();\n\t\t\t}).focus().select();\n\t\t\treturn false;\n\t\t});\n\n\t\t//切换\n\t\t$(self).on(\"click\",'a[data-tdtype=\"toggle\"]',function(){\n\t\t\tvar img    = this,\n\t\t\t\te_icon = $(\"i\",img),\n\t\t\t\ts_val  = ($(img).attr('data-value'))== 0 ? 1 : 0,\n\t\t\t\ts_name = $(img).attr('data-field'),\n\t\t\t\ts_id   = $(img).attr('data-id'),\n\t\t\t\ts_icon_class  = e_icon.attr(\"class\");\n\t\t\t$.getJSON(settings.url, {id:s_id, field:s_name, val:s_val}, function(result){\n\t\t\t\tif(result.status == 1) {\n\t\t\t\t\tif(s_icon_class.indexOf('mdi-close-circle-outline text-danger')>-1) {\n\t\t\t\t\t\te_icon.attr({'class':s_icon_class.replace('mdi-close-circle-outline text-danger','mdi-checkbox-marked-circle-outline text-success'),'data-value':s_val});\n\t\t\t\t\t} else {\n\t\t\t\t\t\te_icon.attr({'class':s_icon_class.replace('mdi-checkbox-marked-circle-outline text-success','mdi-close-circle-outline text-danger'),'data-value':s_val});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\t};\n})(jQuery);","(function ($) {\n    'use strict'\n    function App() {\n        this._ui = new Ui();\n    }\n    function initSlimscroll() {\n        $(\".slimscroll\").slimscroll({\n            height: \"auto\",\n            position: \"right\",\n            size: \"7px\",\n            color: \"#ebf0f6\",\n            wheelStep: 5,\n            opacity: 1,\n            touchScrollStep: 50,\n        });\n    }\n    function getFeatureId(url, key) {\n        var feature_id = 0,\n            _key = key;\n        if (url != \"\") {\n            url = url.replace(\".shtml\", \"\");\n            var array_url = url.split(\"/\"),\n                index_number = _.findIndex(array_url, function (val) {\n                    return val === _key;\n                });\n            if (index_number >= 0) {\n                feature_id = array_url[index_number + 1];\n            } else {\n                feature_id = 0;\n            }\n        }\n        return feature_id;\n    }\n    function initLogout(callback) {\n        var elem_logout = $(\"#button-logout\");\n        elem_logout.on(\"click\", function () {\n            var _elem_this = $(this),\n                _this_data = _elem_this.data();\n            callback.call(null, _this_data.url);\n        });\n        //\n    }\n    function initMainIconMenu() {\n        var pageUrl = window.location.href.split(/[?#]/)[0];\n        $(\".navigation-menu a\").each(function () {\n            var _this_feature_id = getFeatureId(this.href, \"feature_id\"),\n                _this_parent_feature_id = getFeatureId(\n                    pageUrl,\n                    \"parent_feature_id\"\n                ),\n                _page_feature_id = getFeatureId(pageUrl, \"feature_id\");\n            if (\n                (_this_feature_id > 0 &&\n                    _this_parent_feature_id > 0 &&\n                    _this_feature_id === _this_parent_feature_id) ||\n                (_this_feature_id > 0 &&\n                    _page_feature_id > 0 &&\n                    _this_feature_id === _page_feature_id)\n            ) {\n                $(this).parent().addClass(\"active\"); // add active to li of the current link\n                $(this).parent().parent().parent().parent().addClass(\"show\");\n                $(this).parent().parent().addClass(\"show\");\n                $(this).parent().parent().parent().addClass(\"active\"); // add active class to an anchor\n                $(this).parent().parent().parent().parent().addClass(\"active\");\n                $(this)\n                    .parent()\n                    .parent()\n                    .parent()\n                    .parent()\n                    .parent()\n                    .addClass(\"in\");\n                $(this)\n                    .parent()\n                    .parent()\n                    .parent()\n                    .parent()\n                    .parent()\n                    .addClass(\"active\"); // add active class to an anchor\n            }\n        });\n    }\n    \n    function initTopbarMenu() {\n        $(\".navbar-toggle\").on(\"click\", function (event) {\n            $(this).toggleClass(\"open\");\n            $(\"#navigation\").slideToggle(400);\n        });\n\n        $(\".navigation-menu>li\").slice(-2).addClass(\"last-elements\");\n\n        $('.navigation-menu li.has-submenu a[href=\"javascript:;\"]').on(\n            \"click\",\n            function (e) {\n                if ($(window).width() < 992) {\n                    e.preventDefault();\n                    $(this)\n                        .parent(\"li\")\n                        .toggleClass(\"open\")\n                        .find(\".submenu:first\")\n                        .toggleClass(\"open\");\n                }\n            }\n        );\n    }\n\n    function initnavbarMenu() {\n        $(\".has-submenu\").on(\"click\", function (e) {\n            e.preventDefault();\n            $(this).addClass(\"active\");\n            $(this).siblings().removeClass(\"active\");\n            $(\".submenu-tab\").addClass(\"show\");\n            var targ = $(this).attr(\"href\");\n            $(targ).addClass(\"active\");\n            $(targ).siblings().removeClass(\"active\");\n        });\n        $(\".submenu li\").on(\"click\", function (e) {\n            // e.preventDefault();\n            $(this).addClass(\"active\");\n            $(this).siblings().removeClass(\"active\");\n            window.location.href = e.target.href;\n        });\n    }\n\n    function init() {\n        initMainIconMenu();\n        initSlimscroll();\n        initTopbarMenu();\n        initnavbarMenu();\n        Waves.init();\n    }\n    App.prototype.init = function (helper, options) {\n        var _this = this;\n        this._ui.init(helper, options);\n        initLogout(function (url) {\n            _this._ui.logout(url);\n        });\n    };\n    init();\n    $.App = new App();\n    $.App.Constructor = App;\n})(jQuery);\n"]}